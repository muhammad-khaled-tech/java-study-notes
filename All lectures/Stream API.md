
# Part 1: The Stream API Architecture

**(ููุฏุณุฉ ุงูู Stream - ุฎุท ุงูุฅูุชุงุฌ ุงูุฐูู)**

#### 1. The Stream Pipeline Concept ๐๏ธ

**(ููููู ุฎุท ุฃูุงุจูุจ ุงูู Stream)** **(Sources:,)**

##### ๐ The Surface (ุงูุณุทุญ 

ุฃูู ูุงุนุฏุฉ ูุงุฒู ุชุญูุฑูุง ูู ุฏูุงุบู: **ุงูู Stream ูุด Data Structure**. ุงูู Stream ูุด "ูุฎุฒู" ุจูุดูู ุงูุฏุงุชุง ุฒู ุงูู `List` ุฃู ุงูู `Array`. ูู ุนุจุงุฑุฉ ุนู **"ุณูุฑ ูุงูู" (Conveyor Belt)**. ูุธููุชู ูุญุฑู ุงูุฏุงุชุง ูู ุงููุตุฏุฑ (Source)ุ ูุนุฏููุง ุนูู ูุฑุงุญู ูุนุงูุฌุฉุ ููุณููู ุงููุชูุฌุฉ ูู ุงูุขุฎุฑ. ูุจูุฌุฑุฏ ูุง ุงูู Stream ูุฎูุต ุดุบููุ ุจูุฎุชูู. **ูุง ูููู ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงูู** (One-time use only).

##### ๐ง The Deep Dive: The Assembly Line Analogy

**(ุงูุบูุต ุงูุนููู: ุชุดุจูู ุฎุท ุงูุชุฌููุน)** **(Source:)** ุชุฎูู ุฅููุง ูู ูุตูุน ุนุฑุจูุงุช:

1. **Source (ุงููุตุฏุฑ):** ุฏู ุงูุตุงุฌ ูุงููุนุฏู ุงูุฎุงู (ุงููู ูู ุงูู `List` ุฃู ุงูุฏุงุชุง ุจุชุงุนุชู).
2. **Intermediate Operations (ุงูุฑูุจูุชุงุช):** ุฏู ุงููุญุทุงุช ุงููู ูู ุงููุต. ุฑูุจูุช ุจููุญูุ ุฑูุจูุช ุจูุฏููุ ุฑูุจูุช ุจูุฑูุจ ุงูุดุจุงุจูู. (ุฏู ุนูููุงุช ุฒู `filter`, `map`).
3. **Terminal Operation (ููุทุฉ ุงูููุงูุฉ):** ุงูุนุฑุจูุฉ ุจุชุฎุฑุฌ ูู ุงูุฎุท ุฌุงูุฒุฉ. (ุฏู ุงููุชูุฌุฉ ุงูููุงุฆูุฉ).

> [!NOTE] **The Golden Rule** ูู ูููุด ูุนุฏู (Source)ุ ุงูุฑูุจูุชุงุช ูุด ูุชุดุชุบู. ูุงูุฃูู: ูู ูุฏูุณุชุด ุนูู ุฒุฑุงุฑ ุงูุชุดุบูู ูู ุงูุขุฎุฑ (Terminal Op)ุ ุงูุณูุฑ ูุด ููุชุญุฑู ุฃุตูุงู ูุงูุฑูุจูุชุงุช ูุชูุถู ูุงููุฉ ููุงููุง.

##### ๐งโโ๏ธ Mermaid Visualization: The Pipeline Flow

**(ุงููุฎุทุท ุงูููุฏุณู ูุชุฏูู ุงูุจูุงูุงุช - Slide 356)** **(Source:)**

```mermaid
graph LR
    A[Source: List/Array] --> B(Stream Creation)
    B --> C{Intermediate Ops}
    C -- Filter/Map --> D{More Ops}
    D --> E[Terminal Op: Collect/Reduce]
    E --> F[Result]

    style B fill:#f9f,stroke:#333
    style C fill:#ff9,stroke:#333
    style E fill:#9f9,stroke:#333
```

---

#### 2. Intermediate Operations (The "Lazy" Ones) ๐ด

**(ุงูุนูููุงุช ุงููุณูุทุฉ - ุงูุนูููุงุช ุงููุณููุฉ)** **(Sources:,,)**

##### ๐ The Surface (ุงูุณุทุญ)

ุงูุนูููุงุช ุฏู (ุฒู `filter`, `map`, `sorted`) ุจุชุฑุฌุน **Stream ุฌุฏูุฏ**. ุงูููุฒุฉ ุงููุงุชูุฉ ููุง ุฅููุง **LAZY (ูุณููุฉ)**. ูุนูู ุฅููุ ููุง ุชูุงุฏู `.filter()`ุ ุงูุฌุงูุง **ูุด ุจุชููุฐ ุงูููุชุฑุฉ ูุนููุงู** ูู ุณุงุนุชูุง. ูู ุจุณ ุจุชูุชุจ "ููุญูุธุฉ" ูู ุงูููุชุฉ ุจุชุงุนุชูุง: _"ุงุจูู ุงูุชูุฑ ุชููุชุฑ ุงูุฏุงุชุง ุฏู ุจุนุฏูู ููุง ูุทูุจูุง ุงููุชูุฌุฉ"_.

##### ๐ง The Deep Dive: Why Lazy? (Optimization)

**(ุงูุบูุต ุงูุนููู: ููู ุงููุณู ุฏู ูููุฏุ)** **(Source:)** ุงููุณู ุฏู ูู ุณุฑ ุชููู ุงูู Stream API ุนูู ุงูู `for-loop` ุงูุชูููุฏูุฉ. ุชุฎูู ุนูุฏู ูุงุฆูุฉ ูููุง **ููููู (1,000,000)** ุงุณูุ ูุฃูุช ุนุงูุฒ ุชุฌูุจ **ุฃูู ุดุฎุต** ุงุณูู "ุนุจุงุณ".

- **The Old Loop Way (ุงูุทุฑููุฉ ุงููุฏููุฉ):** ุงุญุชูุงู ูุจูุฑ ุชุญูู ุงูููููู ุณุฌู ูููู ูู ุงูููููุฑู ูุชูู ุนูููู.
- **The Stream Way (ุทุฑููุฉ ุณุชุฑูู):** ุงูุฌุงูุง ุจุชุนูู ุฎุท ุฃูุงุจูุจ ุฐูู:
    
    1. ุชุณุญุจ ุงูุงุณู ุงูุฃูู. ูู ูู ุนุจุงุณุ ูุฃ.
    2. ุชุณุญุจ ุงูุชุงูู. ูู ูู ุนุจุงุณุ ุฃููุฉ.
    3. **STOP (ูู ููุฑุงู).**
    4. ุงูุฌุงูุง ุจุชุชุฌุงูู ุงูู 999,998 ุงุณู ุงูุจุงูููู ุชูุงูุงู.
    
    - ุงูุนูููุฉ ุฏู ุงุณููุง **Short-Circuiting** (ุงูุฏุงุฑุฉ ุงููุตูุฑุฉ)ุ ูุฏู ุจุชููุฑ ููุช ูููููุฑู ุจุดูู ูุฑุนุจ.

---

#### 3. Debugging Streams (Pro Tip) ๐ต๏ธโโ๏ธ

**(ูุตูุญุฉ ุณููููุฑ: ุชุตุญูุญ ุฃุฎุทุงุก ุงูู Streams)** **(Source:,)**

ุจูุง ุฅู ุงูู Stream ุนุจุงุฑุฉ ุนู ุณูุณูุฉ ุทูููุฉ ูุชุตูุฉุ ุงูู Debugging ุจุชุงุนูุง ุฑุฎู ุฌุฏุงู ูุฃูู ูุด ุนุงุฑู ุชุญุท Breakpoint ูู ูุต ุงูุณุทุฑ ุจุณูููุฉ.

**ุงูุญู:** ุงุณุชุฎุฏู ุงูุนูููุฉ ุงููุณูุทุฉ `.peek()`.

- ุงูุนูููุฉ ุฏู ุนุงููุฉ ุฒู "ุงูุฌุงุณูุณ" (Spy).
- ุจุชุณูุญ ูู ุชุทุจุน ุงูุนูุตุฑ ููู ุจูุนุฏู ูู ูุฏุงูู ูู ุบูุฑ ูุง ุชุฃุซุฑ ุนูู ุงูู Stream ุฃู ุชุบูุฑ ููู ุญุงุฌุฉ.

##### ๐ป Code Autopsy: The Spy Method

```java
stream.filter(e -> e.length() > 3)
      .peek(e -> System.out.println("Passed Filter: " + e)) // ุงูุฌุงุณูุณ ุจูุทุจุน ููุง
      .map(String::toUpperCase)
      .peek(e -> System.out.println("Passed Map: " + e))    // ููุดููู ุชุงูู ููุง
      .collect(Collectors.toList());
```

---

# Part 2: Intermediate Operations (The Toolbox) ๐๏ธ

**(ุงูุนูููุงุช ุงููุณูุทุฉ - ุตูุฏูู ุงูุฃุฏูุงุช)**

#### 1. The Golden Rule: Lazy & New Stream

**(ุงููุงุนุฏุฉ ุงูุฐูุจูุฉ: ุงููุณู ูุชุฌุฏูุฏ ุงูุชูุงุฑ)** **(Source:)**

##### ๐ The Surface (ุงูุณุทุญ)

ุฃู ุนูููุฉ ูุณูุทุฉ (`filter`, `map`, etc.) ุจุชุนูู ุญุงุฌุชูู:

1. ุจุชุฑุฌุน **Stream ุฌุฏูุฏ** (ุนุดุงู ููุฏุฑ ูููู ุงูุณูุณูุฉ).
2. ุจุชููู **Lazy (ูุณููุฉ):** ูุนูู ูุงุจุชููุฐุด ุฃู ููุฏ ูู ูุญุธุชูุง. ูู ุจุณ ุจุชุณุฌู "ุฃูุฑ ุดุบู" ููุชููุฐ ููุง ูุถุบุท ุฒุฑุงุฑ ุงูุชุดุบูู ูู ุงูุขุฎุฑ.

---

#### 2. The Classification: Stateless vs. Stateful โ๏ธ

**(ุงูุชุตููู: ุนุฏูู ุงูุญุงูุฉ ููุงุจู ุฐู ุงูุญุงูุฉ)** **(Sources:,)**

ุนุดุงู ุชููู "Software Architect" ุดุงุทุฑุ ูุงุฒู ุชูุฑู ุจูู ููุนูู ูู ุงูุนูููุงุช ุฏูุ ูุฃู ุงููุฑู ุจูููู ูู ุงููุฑู ุจูู ุณูุณุชู ุทูุงุฑุฉ ูุณูุณุชู ุจูุฒุญู.

##### A. Stateless Operations (ุงูุนูููุงุช ุงูุฎูููุฉ)

ุฏู ุนูููุงุช "ุณุฑูุนุฉ ุงููุณูุงู". ูููููุงุด ุบูุฑ ุงูุนูุตุฑ ุงููู ูู ุฅูุฏูุง ุฏูููุชู.

- **ูุซุงู:** `filter`, `map`.
- **ุงูุณููู:** ุจุชุนุฏู ุงูุจูุงูุงุช ุนูุตุฑ ุจุนูุตุฑ (One-by-one). ูุด ูุญุชุงุฌุฉ ุชุนุฑู ุงููู ูุจููุง ููุง ุงููู ุจุนุฏูุง.

##### B. Stateful Operations (ุงูุนูููุงุช ุงูููููุฉ/ุงูุฐุงูุฑุฉ)

ุฏู ุนูููุงุช "ุญุดุฑูุฉ". ูุงุฒู ุชุดูู ุงูุฏุงุชุง **ูููุง** ูุจู ูุง ุชุฎุฑุฌ ูุชูุฌุฉ ูุงุญุฏุฉ.

- **ูุซุงู:** `sorted`, `distinct`.
- **ุงูุณููู:** ุจุชููู ุงูุณูุฑ (Blocking). ููููุนุด ุชุฑุชุจ ุฃูู 5 ุนูุงุตุฑ ุฅูุง ููุง ุชุชุฃูุฏ ุฅู ุขุฎุฑ ุนูุตุฑ (ุฑูู ููููู) ูุด ุฃุตุบุฑ ูููู.

---

#### 3. The Intermediate Toolkit (Detailed Breakdown) ๐งฐ

**(ุชูุตูู ุตูุฏูู ุงูุฃุฏูุงุช)** **(Sources:,,)**

ุงูุฌุฏูู ุฏู ุจูุฌูุน ูู ุงูุชูุงุตูู ูู ุงูู Slides ูุน ุชุญููู ุงูุณููููุฑ ููู ููุซูุฏ:

| ุงูุนูููุฉ (Operation)     | ุงูููุน (Type) | ุงููุธููุฉ (Description)                                      | ุชุญููู ุงูุณููููุฑ (Senior Analogy)                                                                                                       |
| :---------------------- | :----------- | :--------------------------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------ |
| **`filter(Predicate)`** | Stateless    | ุจุชุนุฏู ุงูุนูุงุตุฑ ุงููู ุงูู Lambda ุจุชุฑุฌุนููุง `true` ุจุณ.          | **The Bouncer (ุงูุจูุฏู ุฌุงุฑุฏ):** ูุงูู ุนูู ุงูุจุงุจุ ุจูุฏุฎู ุงูู VIP ุจุณ ููุทุฑุฏ ุงูุจุงูู. ุณุฑูุนุฉ ุฌุฏุงู.                                             |
| **`map(Function)`**     | Stateless    | ุจุชุญูู ุงูุฏุงุชุง ูู ููุน ูููุน (ูุซูุงู ูู `String` ูู `Integer`). | **The Alchemist (ุงูุฎูููุงุฆู):** ุจูุญูู ุงูุฑุตุงุต ูุฐูุจ. **ููุญูุธุฉ:** ุงูุนุฏุฏ ุจููุถู ุซุงุจุชุ ุงูุดูู ุจุณ ุงููู ุจูุชุบูุฑ.                                 |
| **`distinct()`**        | **Stateful** | ุจุชูุณุญ ุงูุชูุฑุงุฑ (ุจุชุณุชุฎุฏู `equals` ู `hashCode`).             | **The Memory Hog (ุบูู ุงูููููุฑู):** ุนุดุงู ูุนุฑู ุฅู ุงูุนูุตุฑ ุฏู ูุชูุฑุฑุ ูุงุฒู "ููุชูุฑ" ูู ุงูุนูุงุตุฑ ุงููู ุนุฏุช ุนููู ูุจู ูุฏู.                       |
| **`sorted()`**          | **Stateful** | ุจุชุฑุชุจ ุงูู Stream.                                          | **The Traffic Jam (ุฒุญูุฉ ุงููุฑูุฑ):** ุฏู ุนูููุฉ Blocking. ุงูุณูุฑ ุจููู ุชูุงูุงู ูุญุฏ ูุง ูู ุงูุนูุงุตุฑ ุชูุตู ูุชุชุฑุชุจุ ูุจุนุฏูู ูุจุฏุฃ ูุชุญุฑู ุชุงูู.        |
| **`limit(long n)`**     | Stateful     | ุจุชูุทุน ุงูู Stream ุจุนุฏ ุนุฏุฏ `n` ูู ุงูุนูุงุตุฑ.                   | **The Stopwatch (ุณุงุนุฉ ุงูุฅููุงู):** ุจูุฌุฑุฏ ูุง ุงูุนุฏุงุฏ ููุตู ูู `n`ุ ุจุชุจุนุช ุฅุดุงุฑุฉ "Stop" ูููุตุฏุฑ (Short-Circuit).                             |
| **`skip(long n)`**      | Stateful     | ุจุชุทูุด ุฃูู `n` ุนูุงุตุฑ ูุชููู ูู ุงูุจุงูู.                       | **Pagination:** ุนูุณ `limit`. ูููุฏุฉ ุฌุฏุงู ูู ุจุชุนูู ุตูุญุงุช (ูุงุชูู ุงูุตูุญุฉ ุงูุชุงููุฉ).                                                        |
| **`peek(Consumer)`**    | Stateless    | ุจุชุนูู ุฃูุดู ุฌุงูุจู (ุฒู ุงูุทุจุงุนุฉ) ูู ุบูุฑ ูุง ุชุฃุซุฑ ุนูู ุงูุฏุงุชุง.   | **The Spy (ุงูุฌุงุณูุณ):** ุจุชุณุชุฎุฏู ููู Debugging ุจุณ. ุจุชุดูู ุงูุฏุงุชุง ููู ุจุชุนุฏู ูู ุบูุฑ ูุง ุชููููุง.                                             |
| **`flatMap(Function)`** | Stateless    | ุจุชูู ุงูููุงูู ุงููุนูุฏุฉ (Lists ุฌูู Lists).                    | **The Steamroller (ุงูููุจุณ):** ูู ุนูุฏู `List<List<String>>`ุ ุงูู `map` ูุชุฑุฌุนูู ููุณุชุงุชุ ููู `flatMap` ูุชุณูุญูู ูููู ูู Stream ูุงุญุฏ ูุณุทุญ. |

---

#### 4. ๐ง The Deep Dive: Visualization & Performance ๐

**(ุงูุบูุต ุงูุนููู: ุงูุชุตูุฑ ูุงูุฃุฏุงุก)** **(Sources:,)**

##### ๐งโโ๏ธ Mermaid Visualization: Sorted vs. Filter

**(ูุฎุทุท ุงูุณูุงุจู: ุงููุฑู ุจูู ุงูููุชุฑ ูุงูุชุฑุชูุจ - Source 11)**

ุดูู ุงููุฑู ุจูู ุงูุณูุงุจูุฉ ุงูููุชุฑ ูุนุทูุฉ ุงูุชุฑุชูุจ:

```mermaid
graph TD
    subgraph Stateless [Filter: Stateless]
    A1[Item 1] --> F[Filter] --> Pass1[Pass]
    A2[Item 2] --> F --> Block1[Block]
    end

    subgraph Stateful [Sorted: Stateful]
    B1[Item 3] --> S[Sorted]
    B2[Item 1] --> S
    B3[Item 2] --> S
    S -- Wait for ALL --> SortOp[Processing...]
    SortOp --> O1[Item 1]
    SortOp --> O2[Item 2]
    SortOp --> O3[Item 3]
    end

    style S fill:#f99,stroke:#333,stroke-width:2px
```

> [!WARNING] **Senior Warning: The Infinite Trap** **(Source:)** ุฅูุงู ุชุณุชุฎุฏู `sorted()` ูุน Stream ูุงููุงุฆู (Infinite Stream) ุฃู ุถุฎู ุฌุฏุงู ูู ุบูุฑ ูุง ุชุนูู `limit()` ูุจูู. **ุงูุณุจุจ:** ุงูุฌุงูุง ูุชูุถู ุชุฎุฒู ุงูุฏุงุชุง ูู ุงูููููุฑู ูุณุชููุฉ "ุงูููุงูุฉ" ุนุดุงู ุชุฑุชุจ... ูุงูููุงูุฉ ูุด ูุชูุฌู... ูุจูุญุตู **OutOfMemoryError**.

---

#### 5. ๐จโ๐ซ Senior Logic: Optimization (Order Matters!)

**(ููุทู ุงูุณููููุฑ: ุงูุชุฑุชูุจ ุจููุฑู)** **(Sources:,,)**

ูู ุงูู Stream APIุ ุชุฑุชูุจู ููุนูููุงุช ุจููุฑู ูู ุงูุฃุฏุงุก ุจุดูู ูุฑุนุจ.

##### ๐ป Code Autopsy: Filter Early

ุชุฎูู ุนูุฏูุง ุฃุทุจุงู (Dishes) ูุนุงูุฒูู ูุฌูุจ ุฃุณูุงุก ุงูุฃุทุจุงู ุงููู ุณุนุฑุงุชูุง ุนุงููุฉ (> 300).

**ุงูุทุฑููุฉ ุงูุบุจูุฉ (Bad Practice):**

```java
menu.stream()
    .map(Dish::getName)      // 1. ุญูููุง ูู ุงูุฃุทุจุงู ูุฃุณูุงุก (ูุฌููุฏ ุน ุงููุงุถู)
    .filter(n -> n.length() > 5) // 2. ุจุนุฏูู ุจูููุชุฑ
    .collect(toList());
```

_ููุง ุฅุญูุง ุจุฐููุง ูุฌููุฏ ูู ุงุณุชุฎุฑุงุฌ ุฃุณูุงุก ุฃุทุจุงู ุฅุญูุง ุฃุตูุงู ููุฑูููุง ูู ุงูููุชุฑ!_

**ุงูุทุฑููุฉ ุงูุฐููุฉ (Senior Practice):**

```java
menu.stream()
    .filter(d -> d.getCalories() > 300) // 1. ุงุฑูู ุงูุฒุจุงูุฉ ุงูุฃูู (ููููุง ุงูุนุฏุฏ)
    .map(Dish::getName)                 // 2. ุงุดุชุบู ุจุณ ุนูู ุงููู ุนุฏุง
    .collect(toList());
```

> **ุงููุงุนุฏุฉ:** **Always Filter as early as possible.** (ุฏุงููุงู ููุชุฑ ูู ุงูุฃูู). ๐

---
ุชูุงู ูุง ููุฏุณุฉ. ุฅุญูุง ุฎูุตูุง **Part 1** (ุงูููุฏุณุฉ) ู **Part 2** (ุงูุนูููุงุช ุงููุณูุทุฉ). ุฏูููุชู ููุฏุฎู ูู **Part 3**ุ ูุฏู ุฃูู ุฌุฒุกุ ูุฃู ูู ุบูุฑู ุงูู Stream ููุง ููู ุฃู ูุงุฒูุฉ.

ููุง ููุชููู ุนู "ุฒุฑุงุฑ ุงูุชุดุบูู" (Terminal Operations). ููุชุนูู ุฅุฒุงู ููู ุงูุฏุงุชุงุ ุฅูุชู ูุณุชุฎุฏู `reduce` ูุฅูุชู `collect`ุ ูุงููุฑู ุงููุงุชู ุจูู `findFirst` ู `findAny` ูู ุงูุฃุฏุงุก.

---

# Part 3: Terminal Operations (The "Go" Button) ๐ด

**(ุงูุนูููุงุช ุงูููุงุฆูุฉ - ุฒุฑ ุงูุชุดุบูู)**

#### 1. The Concept: Eager & The Point of No Return

**(ุงูููููู: ุงูุชูููุฐ ุงูููุฑู ูููุทุฉ ุงููุงุนูุฏุฉ)** **(Source:,)**

##### ๐ The Surface (ุงูุณุทุญ)

ุงูุนูููุงุช ุงูููุงุฆูุฉ (Terminal Ops) ูู ุนูุณ ุงูุนูููุงุช ุงููุณูุทุฉ ุชูุงูุงู.

- **Eager (ูููุฌุฉ):** ุจูุฌุฑุฏ ูุง ุจุชูุงุฏููุงุ ุฎุท ุงูุฅูุชุงุฌ ุจูุดุชุบู ููุฑุงู. ุงูุฑูุจูุชุงุช ุจุชุจุฏุฃ ุชุชุญุฑูุ ูุงูุฏุงุชุง ุจุชุฌุฑู ูู ุงูุฃูุงุจูุจ.
- **Consumed (ูุณุชูููุฉ):** ุจูุฌุฑุฏ ูุง ุงูุนูููุฉ ุชุฎูุตุ ุงูู Stream ุจูุชููู (Closed).
- **Rule:** **ูุง ูููู ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู ุงูู Stream.** ูู ุญุงููุช ุชูุงุฏู ููุซูุฏ ุชุงููุฉ ุนูููุ ููุถุฑุจ `IllegalStateException`.

---

#### 2. The Classification: 4 Types of Termination ๐๏ธ

**(ุงูุชุตููู: 4 ุฃููุงุน ููููุงูุฉ)** 

ุฅุญูุง ุจููุณู ุงูุนูููุงุช ุงูููุงุฆูุฉ ูู 4 "ุฌุฑุงุฏู" (Buckets) ุฑุฆูุณูุฉุ ูู ูุงุญุฏุฉ ูููุง ุงุณุชุฎุฏุงู ูุนูุงุฑู ูุฎุชูู:

##### A. Looping (Side Effects)

- **`forEach(Consumer)`**: ุจุชูุณู ูู ุนูุตุฑ ูุชุนูู ุจูู ุญุงุฌุฉ (ุบุงูุจุงู ุทุจุงุนุฉ).
    - **โ๏ธ ุชุญุฐูุฑ ุณููููุฑ:** ุฅูุงู ุชุณุชุฎุฏู `forEach` ุนุดุงู ุชุนุฏู ูุชุบูุฑุงุช ุจุฑู ุงูู Stream (Thread-Safety Issue). ุงุณุชุฎุฏููุง ูููุฑุงุกุฉ ุฃู ุงูุทุจุงุนุฉ ุจุณ.

##### B. Reduction (Math & Logic)

ุฏู ุนูููุงุช "ุทุญู" ุงูุจูุงูุงุช. ุจุชุงุฎุฏ 100 ุนูุตุฑ ูุชุฎุฑุฌูู ุจูููุฉ ูุงุญุฏุฉ (ุฑููุ ุฃู ุนูุตุฑ ูุงุญุฏ).

- **`count()`**: ุจุชุฑุฌุน ุนุฏุฏ ุงูุนูุงุตุฑ. (ูู ุงููุตุฏุฑ `List` ุจุฏูู ููุชุฑุ ุงูุฌุงูุง ุฐููุฉ ูุจุชุฑุฌุน `.size()` ููุฑุงู ูู ุบูุฑ ูุง ุชุนุฏ).
- **`min()` / `max()`**: ุจุชุฑุฌุน ุฃูุจุฑ ุฃู ุฃุตุบุฑ ูููุฉ.
- **`reduce()`**: "ุงูุฌุฏ ุงูุฃูุจุฑ" ููู ุงูุนูููุงุช ุงูุญุณุงุจูุฉ. ุจูุทุจู ูุนุงุฏูุฉ ุชุฑุงูููุฉ (ุฒู ุงูุฌูุน) ุนูู ูู ุงูุนูุงุตุฑ.

##### C. Mutable Reduction (Collecting)

ุฏู ุฃูู ูุงุญุฏุฉ ูู ุงูุดุบู ุงูุญูููู. ุจุฏู ูุง ูุทูุน ุฑููุ ุจูุทูุน **Data Structure** ุฌุฏูุฏุฉ.

- **`collect()`**: ุงูุฌููุฑ. ุจูุญูู ุงูู Stream ูู `List`, `Set`, `Map` ุฃู ุญุชู ููุญู Strings ุจุจุนุถ.
- **`toArray()`**: ุจูุฑูู ุงูุฏุงุชุง ูู ูุตูููุฉ ุนุงุฏูุฉ.

##### D. Search (Short-Circuiting)

ุนูููุงุช ุงูุจุญุซ ุงูุณุฑูุน. ุจุชุฏูุฑ ุนูู "ุฅุจุฑุฉ ูู ููู ูุด" ูุชูู ุฃูู ูุง ุชูุงูููุง.

- **`findFirst()`**: ูุงุชูู ุฃูู ูุงุญุฏ.
- **`anyMatch()`**: ูู ููู "ุฃู ุญุฏ" ุจูุญูู ุงูุดุฑุทุ
- **`allMatch()`**: ูู "ููู" ุจูุญูู ุงูุดุฑุทุ

---

#### 3. ๐ง Deep Dive: `reduce` vs `collect` (The Trap) ๐ชค

**(ุงูุบูุต ุงูุนููู: ุงููุฎ ุจูู ุงูุชูููุต ูุงูุชุฌููุน)** **(Sources:,,)**

ุฏู ููุทุฉ ุจุชููุน ูุงุณ ูู ุงูู Code Review. ุงูุงุชููู ุจููููุง ุงูุฏุงุชุงุ ุจุณ ุงูุชูููุฉ ูุฎุชููุฉ ุชูุงูุงู.

- **`reduce` (ููุฃุดูุงุก ุงูุซุงุจุชุฉ - Immutable):**
    
    - ููุชุงุฒ ููุนูููุงุช ุงูุญุณุงุจูุฉ (`sum`, `product`).
    - **ูุงุฑุซุฉ** ูู ุงุณุชุฎุฏูุชู ุนุดุงู ุชุจูู `List`.
    - _ูููุ_ ูุฃูู ูุน ูู ุนูุตุฑ ุฌุฏูุฏ ููุถุทุฑ ูุนูู `new List()` ูููุณุฎ ุงููุฏูู ููู ูููุง. (Performance Disaster).
- **`collect` (ููุฃุดูุงุก ุงููุชุบูุฑุฉ - Mutable):**
    
    - ูุตูู ุฎุตูุตุงู ุนุดุงู "ูุญูุด" ุงูุฏุงุชุง ูู ูุนุงุก ูุงุญุฏ (`Container`) ุฒู `ArrayList`.
    - ุจูุถูู ุงูุนูุงุตุฑ ูููุณ ุงูููุณุชุฉ ุจููุงุกุฉ ุนุงููุฉ ุฌุฏุงู.

> **ุงููุงุนุฏุฉ:** ูู ุนุงูุฒ ุฑูู (Sum/Max) ุงุณุชุฎุฏู `reduce`. ูู ุนุงูุฒ ุฏุงุชุง (List/Map) ุงุณุชุฎุฏู `collect`.

---

#### 4. ๐ง Deep Dive: `findFirst` vs `findAny` (Parallelism) โก

**(ุงูุบูุต ุงูุนููู: ุงูุฃูู ููุงุจู ุฃู ูุงุญุฏ - ูู ุงูุชูุงุฒู)** **(Source:)**

ูู ุงูู Stream ุงูุนุงุฏู (Sequential)ุ ุงูุงุชููู ุฒู ุจุนุถ ุชูุฑูุจุงู. ุจุณ ูู ุงูู **Parallel Stream** ุงููุฑู ูุงุชู:

- **`findFirst()`**: ุตุงุฑูุฉ ุฌุฏุงู. ูุงุฒู ุชุฑุฌุน "ุฃูู ุนูุตุฑ" ุญุณุจ ุชุฑุชูุจ ุงููุตุฏุฑ ุงูุฃุตูู. ูุฏู ุจูุจุทุฆ ุงูู Parallelism ูุฃู ุงูู Threads ูุงุฒู ุชูุณู ูุน ุจุนุถ ููู ุงูุฃูู.
- **`findAny()`**: ุฏูููุฑุงุทูุฉ ุฌุฏุงู. "ุงููู ูุณุจู ูุงูู ุงููุจู". ุฃู Thread ููุงูู ูุชูุฌุฉ ุงูุฃูู ูุฑุฌุนูุง ููุฑุงู.
    - **ูุตูุญุฉ ุณููููุฑ:** ูู ุงูุชุฑุชูุจ ูุด ูุงุฑู ูุนุงูุ ุฏุงููุงู ุงุณุชุฎุฏู `findAny` ูู ุงูู Parallel Streams ููุฃุฏุงุก ุงูุฃูุตู.

---

#### 5. ๐ง Deep Dive: Why `Optional`? ๐ค

**(ุงูุบูุต ุงูุนููู: ููุงุฐุง ุงูุฃูุจุดูุงูุ)** **(Source:)** ููู `min` ู `max` ู `findFirst` ุจูุฑุฌุนูุง `Optional<T>` ูุด `T` ุนูุทููุ ุชุฎูู ุฅู ุงูู Stream ูุงุถู (Empty Stream). ุฅูู ูู "ุฃูุจุฑ ุฑูู" ูู ูุง ุดูุกุ

- **Junior Dev:** ูุฑุฌุน `null` (ููุนูู NullPointerException).
- **Architecture:** ุงูุฌุงูุง ุจุชุฌุจุฑู ุชุชุนุงูู ูุน ุญุงูุฉ "ุงููุง ุจูุงูุงุช" ุนู ุทุฑูู ุงูู `Optional.empty()`.

---

# Part 4: Primitive Streams (The Speed Factory) ๐๏ธ

**(ุงูุชูุงุฑุงุช ุงูุจุฏุงุฆูุฉ - ูุตูุน ุงูุณุฑุนุฉ)**

#### 1. The Problem: The Boxing Overhead ๐ฆ

**(ุงููุดููุฉ: ุชูููุฉ ุงูุชุนููุจ)** **(Source:)**

##### ๐ The Surface (ุงูุณุทุญ)

ูู ุงูุฌุงูุงุ ุงูู Generics ูุจุชุดุชุบูุด ูุน ุงูู Primitives (`int`, `double`). ูุนูู ููููุนุด ุชูุชุจ `List<int>`. ูุงุฒู ุชูุชุจ `List<Integer>`. ููุง ุชุณุชุฎุฏู `Stream<Integer>`ุ ุงูุฌุงูุง ุจุชุนูู ูุงุฑุซุฉ ูู ุงูุฎูููุฉ ูุน ูู ุนูููุฉ ุญุณุงุจูุฉ:

1. **Unboxing:** ุจุชูุชุญ ุงูุตูุฏูู (`Integer`) ุนุดุงู ุชุทูุน ุงูุฑูู (`int`).
2. **Calculation:** ุจุชุฌูุน ุงูุฑูู `1 + 1`.
3. **Boxing:** ุจุชุญุท ุงููุชูุฌุฉ ุชุงูู ูู ุตูุฏูู ุฌุฏูุฏ (`Integer`).

ุงูุนูููุฉ ุฏู (Box/Unbox) ุจุชูุชู ุงูุฃุฏุงุก ูู ุนูุฏู ููุงููู ุงูุฃุฑูุงู.

##### ๐ง The Senior Pro Tip: Why Primitive Streams?

**(ูุตูุญุฉ ุงูุณููููุฑ: ููุงุฐุง ุงูุชูุงุฑุงุช ุงูุจุฏุงุฆูุฉุ)** **(Source:)** ุงูุฌุงูุง ูุฏูุช 3 ุชูุงุฑุงุช ุฎุงุตุฉ ุฌุฏุงู ุนุดุงู ุชุญู ุงููุดููุฉ ุฏู:

- `IntStream`: ููุฃุฑูุงู ุงูุตุญูุญุฉ (`int`).
- `LongStream`: ููุฃุฑูุงู ุงููุจูุฑุฉ (`long`).
- `DoubleStream`: ููุฃุฑูุงู ุงูุนุดุฑูุฉ (`double`).

ุงูููุฒุฉ ุงููุงุชูุฉ ููุง: **No Boxing**. ุงูุชูุงุฑุงุช ุฏู ุจุชุดุชุบู ุนูู ุงูู Primitive values ุงูุฎุงู ูุจุงุดุฑุฉ ูู ุงูููููุฑู. ุงููุชูุฌุฉุ ุฃุฏุงุก "ุตุงุฑูุฎู" (Blazing Fast).

---

#### 2. ๐ป Code Autopsy: Basic Statistics (IntStream)

**(ุชุดุฑูุญ ุงูููุฏ: ุงูุฅุญุตุงุฆูุงุช ุงูุฃุณุงุณูุฉ)** **(Source:)**

ูู ุงูู Stream ุงูุนุงุฏูุ ุนุดุงู ุชุญุณุจ ุงููุฌููุน `sum()`ุ ููุช ูุญุชุงุฌ ุชุนูู `reduce`. ููู ูู `IntStream`ุ ุงูุนูููุงุช ุฏู ูุจููุฉ ุฌุงูุฒุฉ (Built-in) ููุญุณูุฉ ุฌุฏุงู.

```java
public class IntStreamDemo {
    public static void main(String[] args) {
        // Source: ูุตูููุฉ ุฃุฑูุงู ุนุงุฏูุฉ
        int[] data = {3, 10, 6, 1, 4, 8, 2, 5, 9, 7};

        // 1. Creation: ุจูุณุชุฎุฏู Arrays.stream ููุฃุฑูุงู ุงูุจุฏุงุฆูุฉ
        // ูุงุญุธ: ุงูููุน ููุง IntStream ูุด Stream<Integer>
        IntStream stream = Arrays.stream(data);

        // 2. Built-in Math Operations
        // ุงููููุฒุงุช ุฏู ูุด ููุฌูุฏุฉ ูู Stream<T> ุงูุนุงุฏู
        System.out.println("Min: " + Arrays.stream(data).min().getAsInt()); // 1
        System.out.println("Max: " + Arrays.stream(data).max().getAsInt()); // 10
        System.out.println("Sum: " + Arrays.stream(data).sum());            // 55
        System.out.println("Average: " + Arrays.stream(data).average().getAsDouble()); // 5.5
    }
}
```

---

#### 3. ๐ง The Deep Dive: The `reduce` Method (Under the Hood)

**(ุงูุบูุต ุงูุนููู: ููุซูุฏ ุงูุชูููุต - ูุง ุชุญุช ุงูุบุทุงุก)** **(Source:)**

ุงูููุซูุฏุฒ ุงูุฌุงูุฒุฉ ุฒู `sum` ู `min` ูู ูู ุงูุญูููุฉ ูุฌุฑุฏ "ุงุฎุชุตุงุฑุงุช" (Wrappers) ูุนูููุฉ ุฃููู ูุฃุนูู ุงุณููุง `reduce`. ูู ุนุงูุฒ ุชุนูู ุนูููุฉ ุญุณุงุจูุฉ ูุนูุฏุฉ (ุฒู ุถุฑุจ ูู ุงูุฃุฑูุงู ูู ุจุนุถ)ุ ูุงุฒู ุชุณุชุฎุฏู `reduce` ุจููุณู.

**The Syntax:** `.reduce(Identity, Accumulator)`

1. **Identity (ููุทุฉ ุงูุจุฏุงูุฉ):** ุงููููุฉ ุงููู ุจูุจุฏุฃ ุจููุง (ูุซูุงู 0 ููุฌูุนุ 1 ููุถุฑุจ).
2. **Accumulator (ุงููุฑุงูู):** ุงููุนุงุฏูุฉ ุงููู ุจุชุญุฏุฏ ุฅุฒุงู ูุฏูุฌ ุงูุฑูู ุงูุฌุฏูุฏ ูุน ุงููุชูุฌุฉ ุงูุญุงููุฉ.

##### ๐ป Code Autopsy: Manual Reduction

```java
// ุญุณุงุจ ุญุงุตู ุถุฑุจ ุงูุฃุฑูุงู (Product)
// Identity = 1 (ูุฃู 1 ูู ุงููุญุงูุฏ ุงูุถุฑุจู)
// Accumulator = (a, b) -> a * b
int product = Arrays.stream(data).reduce(1, (a, b) -> a * b);

// ุชุฎูููุง ูุฃููุง Loop:
// Step 1: 1 * 3 = 3
// Step 2: 3 * 10 = 30
// Step 3: 30 * 6 = 180 ... ูููุฐุง
```

---

#### 4. ๐๏ธ Advanced Pipelines: Mapping & Sorting

**(ุฎุทูุท ุงูุฃูุงุจูุจ ุงููุชูุฏูุฉ: ุงูุชุญููู ูุงูุชุฑุชูุจ)** **(Sources:,,)**

ุฏูููุชู ููุจูู ุฎุท ุฅูุชุงุฌ ูุงูู ุจูุนูู ููุชุฑุฉุ ูุชุญูููุ ูุชุฑุชูุจ ูู ููุณ ุงูููุช. **ุงูุณููุงุฑูู:** ุนุงูุฒูู ุงูุฃุฑูุงู ุงููุฑุฏูุฉ (Odd)ุ ูุถุฑุจูุง ูู 10ุ ูุจุนุฏูู ูุฑุชุจูุง ููุทุจุนูุง.

##### ๐ป Code Autopsy: The Odd Number Pipeline

**(Source:)**

```java
// Source: ุงุณุชุฎุฏุงู of() ูุฅูุดุงุก ุณุชุฑูู ุณุฑูุน
IntStream.of(3, 10, 6, 1, 4, 8, 2, 5, 9, 7)
         // 1. Filter: ุนุฏู ุงููุฑุฏู ุจุณ
         .filter(n -> n % 2 != 0)
         // 2. Map: ุงุถุฑุจ ูู 10 (3->30, 1->10)
         .map(n -> n * 10)
         // 3. Sorted: ุฑุชุจูู (Blocking Op!)
         .sorted()
         // 4. Terminal: ุงุทุจุน ูู ูุงุญุฏ
         .forEach(n -> System.out.print(n + " "));

// Output: 10 30 50 70 90
```

##### ๐งโโ๏ธ Mermaid Visualization: The Pipeline Flow

**(ุงููุฎุทุท ุงูุงูุณูุงุจู ูุชุฏูู ุงูุจูุงูุงุช)** **(Source:)**

```mermaid
graph LR
    A[Source: 3, 10, 1...] --> B{Filter: %2!=0}
    B -- 3, 1... --> C[Map: *10]
    C -- 30, 10... --> D{Sorted}
    D -- Wait All --> E[10, 30, 50...]
    E --> F[forEach: Print]
```

---

#### 5. ๐ง Senior Detail: `range` vs `rangeClosed` ๐

**(ุชูุตููุฉ ุณููููุฑ: ุงููุทุงู ุงูููุชูุญ ูุงููุบูู)** **(Source:)**

ุณุงุนุงุช ูุชูุฑ ุจุชุญุชุงุฌ ุชููุฏ ุฃุฑูุงู "ูู ุงูููุง" (On the fly) ุจุฏู ูุง ุชูุฑุฃ ูู ูุตูููุฉ. `IntStream` ุนูุฏู ุงูุญู:

- **`IntStream.range(1, 10)`:** ุจูููุฏ ูู 1 ูุญุฏ 9. (**Excludes** the last number). ุฒู `for(i=0; i<10; i++)`.
- **`IntStream.rangeClosed(1, 10)`:** ุจูููุฏ ูู 1 ูุญุฏ 10. (**Includes** the last number). ุฒู `for(i=1; i<=10; i++)`.

> **ูุตูุญุฉ ุณููููุฑ:** ูู ุจุชุนูู Loop ุชูููุฏูุฉุ ุงุณุชุฎุฏู `range`. ูู ุดุบุงู ุนูู ุจุฒูุณ ููุฌูู (ุฒู "ูู ุดูุฑ 1 ูุดูุฑ 12")ุ ุงุณุชุฎุฏู `rangeClosed` ุนุดุงู ุงูููุฏ ูููู ููุฑูุก ูุตุญูุญ.

---

# Part 5: Object Streams & Real-World Data ๐ฅ

**(ุชูุงุฑุงุช ุงููุงุฆูุงุช ูุงูุจูุงูุงุช ุงููุงูุนูุฉ)**

#### 1. The Scenario: The Dish Menu ๐

**(ุงูุณููุงุฑูู: ูุงุฆูุฉ ุงูุทุนุงู)** **(Source:)**

ุนูุฏูุง ููุงุณ ุงุณูู `Dish` ููู ุจูุงูุงุช: ุงูุงุณูุ ุงูุณุนุฑุงุชุ ุงูููุนุ ููู ูู ูุจุงุชู ููุง ูุฃ. ูุนูุฏูุง `List<Dish> menu`.

##### โ๏ธ Old vs. New: The Vegetarian Filter

**(ุงููุฏูู ุถุฏ ุงูุญุฏูุซ: ููุชุฑ ุงููุจุงุชููู - Slide 372)**

ุนุงูุฒูู ูุทูุน ูุงุฆูุฉ ุจูู ุงูุฃุทุจุงู ุงููุจุงุชูุฉ.

- **Java 7 (The Imperative Way - ุงูุทุฑููุฉ ุงูุขูุฑุฉ):** ูุงุฒู ุชููู ููุฌุงูุง "ุฅุฒุงู" ุชุนูู ุงูุญุงุฌุฉ:
    
    1. ุงุนููู ููุณุชุฉ ูุงุถูุฉ `vegetarianDishes`.
    2. ุงูุชุญู `for-loop` ุนูู ุงููููู.
    3. ูู ุงูุทุจู ูุจุงุชู `if`...
    4. ุถูููู ูู ุงูููุณุชุฉ `add`.
    
    - _ุงููุดููุฉ:_ ููุฏ ุฑุบู (Verbose) ูููู ูุชุบูุฑุงุช ูุคูุชุฉ ูุชูุฑ (Garbage Variables).
- **Java 8 (The Stream Way - ุงูุทุฑููุฉ ุงูุชุตุฑูุญูุฉ):** ุฃูุช ุจุชููู ููุฌุงูุง "ุนุงูุฒ ุฅูู" ุจุณ:
    
    ```java
    List<Dish> vegetarianDishes = menu.stream()
                                      .filter(Dish::isVegetarian) // ุนุงูุฒ ูุจุงุชู
                                      .collect(toList());         // ุฌูุนูู
    ```
    
    - _ุงูููุฒุฉ:_ ุงูููุฏ ุจูุชูุฑู ูุฃูู ุฅูุฌููุฒู: _"From menu, stream, filter vegetarian, collect to list."_

---

#### 2. ๐งช The Complex Pipeline: High Calorie Names ๐

**(ุฎุท ุงูุฃูุงุจูุจ ุงููุนูุฏ: ุฃุณูุงุก ุงูุณุนุฑุงุช ุงูุนุงููุฉ)** **(Sources:,,)**

> **ุงููููุฉ (The Mission):**
> 
> 1. ูุงุช ุงูุฃุทุจุงู ุงููู ุณุนุฑุงุชูุง **ุฃุนูู ูู 300**.
> 2. ุงุณุชุฎุฑุฌ **ุฃุณูุงุกูุง** ููุท.
> 3. ูุงุช **ุฃูู 3** ุฃุทุจุงู ุจุณ.
> 4. ุญุทูู ูู `List`.

##### ๐ป Code Autopsy (Slide 374)

**(ุชุดุฑูุญ ุงูููุฏ)**

```java
List<String> names = menu.stream()
    // 1. Filter: ุงูุชุตููุฉ ุฃููุงู (High Calories)
    .filter(d -> d.getCalories() > 300)

    // 2. Map: ุงูุชุญููู (Extract Name)
    // ูุงุญุธ: ุงูู Stream ุงุชุญูู ููุง ูู Stream<Dish> ูู Stream<String>
    .map(Dish::getName)

    // 3. Limit: ุงููุต (Short-Circuit)
    // ุจูุฌุฑุฏ ูุง ููุงูู 3ุ ุงููู ุงููุญุจุณ ููุฑุงู
    .limit(3)

    // 4. Terminal: ุงูุชุฌููุน
    .collect(Collectors.toList());
```

##### ๐งโโ๏ธ Mermaid Visualization: The Data Flow

**(ุงููุฎุทุท ุงูุงูุณูุงุจู ูุชุฏูู ุงูุจูุงูุงุช - Slide 375)** **(Source:)**

ุจุต ุนูู ุญุฑูุฉ ุงูุจูุงูุงุช ุฌูู ุงูุฃูุงุจูุจ:

```mermaid
graph TD
    Source[Menu List] --> Stream
    Stream --> Filter{Filter: >300}
    Filter -- Dish(Pork) --> Map
    Filter -- Dish(Beef) --> Map
    Filter -- Dish(Chicken) --> Map
    Filter -- Dish(Rice) --> X[Discarded]

    Map[Map: getName] --> Name1["Pork"]
    Map --> Name2["Beef"]
    Map --> Name3["Chicken"]

    Name1 --> Limit{Limit: 3}
    Name2 --> Limit
    Name3 --> Limit
    Limit --> Stop[STOP Pipeline]
    Limit --> Result[List<String>]

    style Filter fill:#f9f,stroke:#333
    style Map fill:#ff9,stroke:#333
    style Limit fill:#9ff,stroke:#333
```

---

#### 3. ๐จโ๐ซ Senior Architecture: The "Filter First" Rule ๐

**(ููุฏุณุฉ ุงูุณููููุฑ: ูุงุนุฏุฉ ุงูููุชุฑุฉ ุฃููุงู)** 

ุฏู ุฃูู ููุทุฉ ูููุฉ ูู ุงูุฌุฒุก ุฏูุ ูุจุชูุฑู ุจูู ุงููุจุฑูุฌ ุงูุนุงุฏู ูุงููุนูุงุฑู ุงููุงูู ููู Internals.

ูู ุจุตูุช ุนูู ุงูููุฏุ ูููู ุญุฏ ูููู: _"ุทุจ ูุง ุฃูุง ูููู ุฃุนูู `map` ุงูุฃูู ุฃุทูุน ุงูุฃุณูุงุกุ ูุจุนุฏูู ุฃุนูู `filter`"_. ุงูููุฏ ููุดุชุบูุ **ุฃู.** ุงูููุฏ ุณูููุ **ูุฃุ ุฏู ูุงุฑุซุฉ ุฃุฏุงุก (Performance Hit).**

##### ๐ง Why Order Matters? (ููู ุงูุชุฑุชูุจ ุจููุฑูุ)

1. **Scenario A (Incorrect - Map First):**
    
    - ุนูุฏู 1000 ุทุจู.
    - ุจุชุนูู `map` ููู 1000 ุทุจู (ุงุณุชุฎุฑุงุฌ ุงูุงุณู). **(1000 ุนูููุฉ)**.
    - ุจุนุฏูู ุจุชุนูู `filter`. ุจุชูุชุดู ุฅู 800 ุทุจู ูููู ูุด ูุญุชุงุฌูููู ุฃุตูุงู.
    - **ุงููุชูุฌุฉ:** ุถูุนุช CPU ูู ุงุณุชุฎุฑุงุฌ ุฃุณูุงุก ูุฃุทุจุงู ูุชุชุฑูู ูู ุงูุฒุจุงูุฉ.
2. **Scenario B (Correct - Filter First):**
    
    - ุนูุฏู 1000 ุทุจู.
    - ุจุชุนูู `filter`. ุงูู 800 ุทุจู ุงููุญุดูู ุจูุชุฑูุถูุง ููุฑุงู.
    - ูุชุจูู 200 ุทุจู.
    - ุจุชุนูู `map` ููู 200 ุจุณ. **(200 ุนูููุฉ)**.
    - **ุงููุชูุฌุฉ:** ููุฑุช 800 ุนูููุฉ ูุนุงูุฌุฉ!

> **ุงููุงุนุฏุฉ ุงูุฐูุจูุฉ:** **Always Filter as early as possible.** (ุฏุงููุงู ุญุท ุงูููุชุฑ ูู ุจูุฒ ุงููุฏูุนุ ุนุดุงู ุชููู ูููุฉ ุงูุฏุงุชุง ุงููู ุจุชุนุฏู ูุจุงูู ุงููุฑุงุญู).

---
ุชูุงู ูุง ููุฏุณุฉ. ุจูุงุกู ุนูู ุงูุฎุทุฉ ุงูุตุงุฑูุฉ (Ultimate Precision)ุ ุฅุญูุง ููููุง ูู ุฃุจูุงุจ ุงูู Sequential Streams. ุฏูููุชู ุฌู ููุช **Part 6** ูุงูุฃุฎูุฑ. ููุง ููุชููู ุนู "ุงููุญุด" ุงููุงูู ูู ุฌูุงุฒู: **Multi-core Processing**.

ูู ุงูุฌุฒุก ุฏูุ ููุชุนูู ุฅุฒุงู ูุญูู ุงูู Stream ูู "ููุธู ูุงุญุฏ ุบูุจุงู" ูู "ุฌูุด ูู ุงูููุธููู" ุจูููุฉ ูุงุญุฏุฉุ ูููุนุฑู ุฅูุชู ุงูุญุฑูุฉ ุฏู ุชููู "ุฐูุงุก" ูุฅูุชู ุชููู "ุบุจุงุก" ูุจุทุฆ ุงูุณูุณุชู.

---

# Part 6: Parallel Streams & Performance ๐

**(ุงูุชูุงุฑุงุช ุงููุชูุงุฒูุฉ ูุงูุฃุฏุงุก ุงูุนุงูู - Lesson 9 Part 2)**

#### 1. The Evolution of Parallelism ๐ฆ

**(ุชุทูุฑ ุงูุชูุงุฒู - ูู ุงูุนุตุฑ ุงูุญุฌุฑู ููุนุตุฑ ุงูุญุฏูุซ)** **(Sources:,)**

##### ๐ The Surface (ุงูุณุทุญ)

ุฒูุงู (ูุจู Java 7)ุ ุนุดุงู ุชุดุบู ุงูู 4 Cores ุงููู ูู ุฌูุงุฒูุ ููุช ุจุชุนูุด ูู ูุงุจูุณ:

1. ุชุนูู **Manual Threads**.
2. ุชูุณู ุงูุฏุงุชุง ุจููุณู (Sub-lists).
3. ูุฃุตุนุจ ุญุชุฉ: **Synchronize Results** (ุชุฌููุน ุงููุชุงูุฌ ูู ุบูุฑ ูุง ูุญุตู Race Conditions).

##### ๐ง The Deep Dive: "What" vs "How"

**(ุงูุบูุต ุงูุนููู: ูุงุฐุง ููุงุจู ููู)** **(Source:)** ุงูู Stream API ูู Java 8 ุบูุฑุช ุงููุนุจุฉ.

- **The Old Way (Imperative):** ุฃูุช ุงููุฏูุฑ ุงููู ุจููู ููู ุฏูุงุบ ุงูููุธููู ููููููู ููุณููุง ุงูุดุบู ุฅุฒุงู (Micro-management).
- **The Stream Way (Declarative):** ุฃูุช ุจุชููู ููุฌุงูุง: _"ุฃูุง ุนุงูุฒ ุงูุดุบู ุฏู ูุชู ุจุงูุชูุงุฒู (Parallel)"_. ูุงูุฌุงูุง ูู ุงููู ุจุชุชุตุฑู ูู ุชูุณูู ุงูู Threadsุ ูุงูู Schedulingุ ูุงูุชุฌููุน.

---

#### 2. Under the Hood: The Fork/Join Framework โ๏ธ

**(ูุง ุชุญุช ุงูุบุทุงุก: ุฅุทุงุฑ ุงูุชูุฑุน ูุงูุถู)** **(Sources:,)**

ููุง ุจุชูุชุจ `.parallel()`ุ ุฅูู ุงููู ุจูุญุตู ุฌูู ุงูู JVMุ

1. **Splitting (Decomposition):** ุงูุฌุงูุง ุจุชูุณู ุงูุฏุงุชุง ุจุชุงุนุชู ูุชูุทุนูุง ูู "Chunks" (ูุชู ุตุบูุฑุฉ).
2. **Processing:** ูู Core ูู ุงูุจุฑูุณูุณูุฑ ุจูุงุฎุฏ Chunk ููุฑููุง.
3. **Merging:** ูู ุงูุขุฎุฑุ ุงููุชุงูุฌ ุจุชุชุฌูุน ุชุงูู ูู ูุชูุฌุฉ ูุงุญุฏุฉ.

##### ๐งโโ๏ธ Mermaid Visualization: The Fork/Join Strategy

**(ูุฎุทุท ุงูุณูุงุจู: ุงุณุชุฑุงุชูุฌูุฉ ุงูุชูุณูู)** **(Source:)**

```mermad
graph TD
    Data[Big Data List] --> Split{Splitter}
    Split --> Chunk1[Chunk 1 -> Thread A]
    Split --> Chunk2[Chunk 2 -> Thread B]
    Split --> Chunk3[Chunk 3 -> Thread C]

    Chunk1 --> Result1
    Chunk2 --> Result2
    Chunk3 --> Result3

    Result1 & Result2 & Result3 --> Merge{Merger}
    Merge --> Final[Final Result]

    style Split fill:#f9f,stroke:#333
    style Merge fill:#9ff,stroke:#333
```

##### โ๏ธ Senior Warning: The Splitting Cost (ุชูููุฉ ุงูุชูุณูู)

**(Source:)** ุงููุตุฏุฑ ุจูุญุฐุฑ ุชุญุฐูุฑ ุฎุทูุฑ: **"If you ignore this aspect, you could obtain unexpected results."** ูุด ุฃู ุฏุงุชุง ูููุน ุชุชูุณู ุจุณุฑุนุฉ:

- **ArrayList:** ููุชุงุฒุฉ. (ูุฃููุง Index Basedุ ุณูู ูููู "ุฎุฏ ูู 0 ูู 500").
- **LinkedList:** ุณูุฆุฉ ุฌุฏุงู. (ุนุดุงู ุชูุณููุง ูุงุฒู ุชูุดู ุนูู ุงูู Nodes ูุงุญุฏุฉ ูุงุญุฏุฉุ ูุฏู ุจูุงุฎุฏ ููุช ุฃุทูู ูู ุงููุนุงูุฌุฉ ููุณูุง!).

---

#### 3. The Syntax & The Summing Trap ๐ชค

**(ุจูุงุก ุงูุฌููุฉ ููุฎ ุงูุฌูุน)** **(Sources:,)**

ุชุนุงู ูุดูู ูุซุงูููุ ูุงุญุฏ "ุบุจู" ููุงุญุฏ "ุฐูู" ูู ุงูุชูุงุฒู.

##### ๐ป Code Autopsy: The Naive Approach (Wrong) โ

**(Source:)**

```java
// ุงููุฏู: ุฌูุน ุงูุฃุฑูุงู ูู 1 ูู N ุจุงูุชูุงุฒู
Stream.iterate(1L, i -> i + 1) // 1. ุงููุตุฏุฑ: Iterate
      .limit(N)
      .parallel()              // 2. ุชุญููู ูุชูุงุฒู
      .reduce(0L, Long::sum);
```

**ุชุญููู ุงูุณููููุฑ:** ุงูููุฏ ุฏู **ุจุทูุก ุฌุฏุงู**ุ ููููู ูููู ุฃุจุทุฃ ูู ุงูู Sequential. ูููุ

- `Stream.iterate` ุจูุนุชูุฏ ุนูู ุงูุฑูู ุงููู ูุจูู ุนุดุงู ููุชุฌ ุงูุฑูู ุงููู ุจุนุฏู (`i -> i + 1`).
- ุงูุฌุงูุง ูุด ุนุงุฑูุฉ ุชูุณู ุงูุฏุงุชุง ูุฃููุง ูุด ุดุงููุฉ ุงููุณุชูุจู. ูุงุฒู ุชุญุณุจ 1 ุนุดุงู ุชุฌูุจ 2ุ ูุนุดุงู ุชุฌูุจ 3.
- **ุงููุชูุฌุฉ:** ุงูู Threads ูุชูุถู ูุณุชููุฉ ุจุนุถ (Sequential bottleneck).

##### ๐ป Code Autopsy: The Smart Approach (Correct) โ

**(Source:)**

```java
// ุงุณุชุฎุฏุงู LongStream.rangeClosed
LongStream.rangeClosed(1, N) // 1. ุงููุตุฏุฑ: ูุทุงู ุฑููู
          .parallel()        // 2. ุชูุงุฒู
          .reduce(0L, Long::sum);
```

**ุชุญููู ุงูุณููููุฑ:**

- `rangeClosed(1, N)` ุฏู ูุนุงุฏูุฉ ุฑูุงุถูุฉ. ุงูุฌุงูุง ุนุงุฑูุฉ ุงูุจุฏุงูุฉ ูุงูููุงูุฉ.
- ุจุณูููุฉ ุชูุฏุฑ ุชููู: "Thread 1 ูุงุฎุฏ ูู 1 ูู 500ุ ู Thread 2 ูุงุฎุฏ ูู 501 ูู 1000".
- **ุงููุชูุฌุฉ:** ุชูุงุฒู ุญูููู ูุฃุฏุงุก ุนุงูู.

---

#### 4. Real-World Benchmark: Prime Numbers ๐

**(ุงุฎุชุจุงุฑ ุงูุฃุฏุงุก ุงููุงูุนู: ุงูุฃุนุฏุงุฏ ุงูุฃูููุฉ)** **(Source:)**

ุงููุตุฏุฑ ุจูุนูู ุงุฎุชุจุงุฑ ุญูููู (CPU Intensive Task): ุญุณุงุจ ุนุฏุฏ ุงูุฃุนุฏุงุฏ ุงูุฃูููุฉ ูู ุฃูู ููููู ุฑูู.

##### ๐ป Code Autopsy: The Benchmark Code

```java
// ุฏุงูุฉ ุจุชุดูู ุงูุฑูู ุฃููู ููุง ูุฃ (ุจุชุงุฎุฏ ููุช ููุฌููุฏ ูู ุงูู CPU)
public boolean isPrime(long n) { ... }

// 1. Sequential Test
long start = System.currentTimeMillis();
long count = IntStream.rangeClosed(2, 1_000_000)
                      .filter(this::isPrime) // ููุชุฑ ุชููู
                      .count();
// ุงูููุช: ~1 ุฏูููุฉ ู 14 ุซุงููุฉ

// 2. Parallel Test
long start2 = System.currentTimeMillis();
long count2 = IntStream.rangeClosed(2, 1_000_000)
                       .parallel()          // ุงูุณุญุฑ ููุง
                       .filter(this::isPrime)
                       .count();
// ุงูููุช: ~23 ุซุงููุฉ
```

##### ๐ The Result Analysis

**(ุชุญููู ุงููุชุงุฆุฌ)**

- **ุงูุณุฑุนุฉ:** ุฒุงุฏุช 3 ุฃุถุนุงู (3x Speedup).
- **ุงูุณุจุจ:** ุนูููุฉ `isPrime` ุนูููุฉ ุญุณุงุจูุฉ ุจุญุชุฉุ ูุงูู Source (`rangeClosed`) ุณูู ุงูุชูุณูู. ุฏู ุงูุญุงูุฉ ุงููุซุงููุฉ ููู Parallel Stream.

---

#### 5. ๐ Senior Decision Matrix: To Parallel or Not?

**(ูุตูููุฉ ูุฑุงุฑ ุงูุณููููุฑ: ูุชูุงุฒู ููุง ูุฃุ)** **(Source:)**

ูุจู ูุง ุชูุชุจ `.parallel()` ุนุดุงู ุชุนูู ูููุง "ุฌุงูุฏ"ุ ุงุณุฃู ููุณู ุงูู 3 ุฃุณุฆูุฉ ุฏูู (ุจูุงุกู ุนูู Slides 378 & 385):

1. **Is the dataset massive?** (ูู ุงูุจูุงูุงุช ุถุฎูุฉุ)
    - ูู ุนูุฏู 1000 ุนูุตุฑุ ุงูุชูุงุฒู ููุจุทุฆ ุงูููุฏ (ุจุณุจุจ ุชูููุฉ ุฅูุดุงุก ุงูู Threads).
    - ูู ุนูุฏู ูููููุ ุฏูุณ `parallel`.
2. **Is the calculation heavy?** (ูู ุงูุนูููุฉ ุชูููุฉุ)
    - ุนูููุฉ ุฌูุน ุจุณูุทุฉ `+` ุจุชุฎูุต ูู ูุงูู ุซุงููุฉ. ุงูุชูุงุฒู ููุง ูููุด ูุงุฒูุฉ.
    - ุนูููุฉ ูุนูุฏุฉ (ุชุดุดููุฑุ Primesุ Image Processing)ุ ุงูุชูุงุฒู ููุง ููููุฐู.
3. **Is the source easy to split?** (ูู ุงููุตุฏุฑ ูุงุจู ููุชูุณููุ)
    - `ArrayList`, `IntStream.range`: **ููุชุงุฒ (Go).** โ
    - `LinkedList`, `Stream.iterate`: **ุณูุก (Stop).** โ

---






